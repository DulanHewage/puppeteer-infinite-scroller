async function y(t,o){let{scrollDelay:n=1e3,itemCount:a=10,pageFunction:r,selector:e}=o;if(!e&&!r)throw new Error("Either selector or pageFunction must be provided as an option");if(e&&typeof e!="string")throw new Error("Selector must be a string");if(r&&typeof r!="function")throw new Error("PageFunction must be a function");if(typeof a!="number")throw new Error("ItemCount must be a number");if(typeof n!="number")throw new Error("ScrollDelay must be a number");try{return await l(t,[],a,e,r,n)}catch(i){return console.log("Error:",i.message),[]}}async function l(t,o,n,a,r,e){if(n<=o.length)return o.slice(0,n);let i=[];a?i=await t.evaluate(w=>{let f=document.querySelectorAll(w);return Array.from(f).map(u=>{let b=Array.from(u.attributes).reduce((s,c)=>(s[c.name]=u.getAttribute(c.name),s),{});return{tagName:u.tagName,...b}})},a):r&&(i=await t.evaluate(r)),o.push(...i);let m=await t.evaluate("document.body.scrollHeight");return await t.evaluate("window.scrollTo(0, document.body.scrollHeight)"),await t.waitForFunction(`document.body.scrollHeight > ${m}`),await t.waitForTimeout(e),l(t,o,n,a,r,e)}module.exports=y;
